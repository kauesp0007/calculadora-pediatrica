<div class="flex items-center mb-6">
    <img src="iconpages.png" alt="Logo Calculadoras de Enfermagem" class="w-16 h-auto mr-4" />
    <h1 class="text-left">Escala de Apgar</h1>
</div>

<div id="pdfContent" class="bg-white p-6 rounded-lg shadow-md mb-8 text-left">
    <p class="mt-4 text-apoio text-left">A Escala de Apgar avalia a condição física do recém-nascido (RN) logo após o parto, em dois momentos cruciais: 1 e 5 minutos de vida. Ela avalia cinco critérios: frequência cardíaca, esforço respiratório, tônus muscular, irritabilidade reflexa e cor da pele. Cada critério recebe uma nota de 0 a 2, e a soma total pode variar de 0 a 10.</p>
    <p class="mt-2 text-apoio text-left">Um escore de 7 a 10 é considerado normal. Escores abaixo de 7 indicam a necessidade de observação ou intervenção médica e de enfermagem.</p>
    
    <p class="mt-4 text-apoio text-left">Selecione a pontuação para cada item e clique em "Calcular":</p>

    <table class="w-full text-left text-sm mt-4 border-collapse">
        <thead>
            <tr>
                <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 font-semibold text-gray-700">Critério</th>
                <th class="py-2 px-3 border-b-2 border-gray-200 bg-gray-100 font-semibold text-gray-700">Pontuação</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="font-semibold w-2/5 py-2 px-3 border-b border-gray-200">Frequência Cardíaca</td>
                <td class="w-3/5 py-2 px-3 border-b border-gray-200">
                    <label class="block mb-1"><input type="radio" name="fc" value="0" class="mr-2"> Ausente (0)</label>
                    <label class="block mb-1"><input type="radio" name="fc" value="1" class="mr-2"> &lt; 100 bpm (1)</label>
                    <label class="block"><input type="radio" name="fc" value="2" class="mr-2"> ≥ 100 bpm (2)</label>
                </td>
            </tr>
            <tr>
                <td class="font-semibold py-2 px-3 border-b border-gray-200">Esforço Respiratório</td>
                <td class="py-2 px-3 border-b border-gray-200">
                    <label class="block mb-1"><input type="radio" name="resp" value="0" class="mr-2"> Ausente (0)</label>
                    <label class="block mb-1"><input type="radio" name="resp" value="1" class="mr-2"> Respiração lenta/irregular (1)</label>
                    <label class="block"><input type="radio" name="resp" value="2" class="mr-2"> Choro vigoroso (2)</label>
                </td>
            </tr>
            <tr>
                <td class="font-semibold py-2 px-3 border-b border-gray-200">Tônus Muscular</td>
                <td class="py-2 px-3 border-b border-gray-200">
                    <label class="block mb-1"><input type="radio" name="tonus" value="0" class="mr-2"> Flácido (0)</label>
                    <label class="block mb-1"><input type="radio" name="tonus" value="1" class="mr-2"> Flexão de extremidades (1)</label>
                    <label class="block"><input type="radio" name="tonus" value="2" class="mr-2"> Movimentos ativos (2)</label>
                </td>
            </tr>
            <tr>
                <td class="font-semibold py-2 px-3 border-b border-gray-200">Irritabilidade Reflexa</td>
                <td class="py-2 px-3 border-b border-gray-200">
                    <label class="block mb-1"><input type="radio" name="reflexo" value="0" class="mr-2"> Ausente (0)</label>
                    <label class="block mb-1"><input type="radio" name="reflexo" value="1" class="mr-2"> Caretas (1)</label>
                    <label class="block"><input type="radio" name="reflexo" value="2" class="mr-2"> Choro, espirro ou tosse (2)</label>
                </td>
            </tr>
            <tr>
                <td class="font-semibold py-2 px-3 border-b border-gray-200">Cor da Pele</td>
                <td class="py-2 px-3 border-b border-gray-200">
                    <label class="block mb-1"><input type="radio" name="cor" value="0" class="mr-2"> Pálido ou cianótico (0)</label>
                    <label class="block mb-1"><input type="radio" name="cor" value="1" class="mr-2"> Corpo rosado, extremidades azuladas (1)</label>
                    <label class="block"><input type="radio" name="cor" value="2" class="mr-2"> Rosado por completo (2)</label>
                </td>
            </tr>
        </tbody>
    </table>

    <div class="resultado" id="resultado"></div>
    
    <div class="ref text-small-note mt-8">
        Referência: <a href="http://www.cofen.gov.br/resoluo-cofen-n-3282008_4807.html" target="_blank" rel="noopener noreferrer" class="text-light-blue hover:underline">Conselho Federal de Enfermagem - COFEN. Resolução Nº 328/2008 e protocolos de cuidado neonatal.</a>
    </div>
</div>

<div class="flex flex-wrap justify-start gap-4 mt-6">
    <button onclick="calcular()" class="btn-primary">Calcular</button>
    <button onclick="limpar()" class="btn-primary">Limpar</button>
    <button onclick="gerarPDFWrapper()" class="btn-secondary">Gerar PDF</button>
</div>

<script>
// Código de cálculo da escala Apgar (mantido aqui para ser carregado junto com o conteúdo)
function calcular() {
  const campos = ["fc", "resp", "tonus", "reflexo", "cor"];
  let total = 0;
  for (let campo of campos) {
    const selecionado = document.querySelector(`input[name="${campo}"]:checked`);
    if (!selecionado) {
      document.getElementById("resultado").innerText = "Por favor, selecione todas as opções para calcular.";
      document.getElementById("resultado").classList.add('text-red-600'); // Adiciona cor de erro
      document.getElementById("resultado").classList.remove('text-dark-blue'); // Remove cor normal
      return;
    }
    total += parseInt(selecionado.value);
  }

  let conduta = "";
  if (total >= 8) {
    conduta = "Recém-nascido com boa vitalidade. Cuidados de enfermagem ao recém-nascido: Meta 1 (dupla pulseira + check list verbalizado com a mãe), aquecimento, impressão digito podálico, pesagem, PC, PT, PA, comprimento, temperatura corporal, envolver na manta aquecida. Humanizar.";
  } else if (total >= 4) {
    conduta = "Moderada depressão. Conduta: suporte e reavaliação imediata: Monitorização contínua, oximetria de pulso, observação de MRPM, aletas nasais, manter material preparado para via aérea avançada.";
  } else {
    conduta = "Grave depressão. Conduta: reanimação neonatal imediata: Suporte ao neonatologista > montar laringo, ter a disposição TOT sem cuff, realizar o preparo de rediluição da epinefrina, ter por perto isolet com cilindro de O2 cheio e AMBU; Outras assistências de enfermagem.";
  }

  const resultadoDiv = document.getElementById("resultado");
  resultadoDiv.innerText = `Pontuação total: ${total}/10\n\nConduta: ${conduta}`;
  resultadoDiv.classList.remove('text-red-600'); // Remove cor de erro
  resultadoDiv.classList.add('text-dark-blue'); // Adiciona cor normal
}

// Limpa os campos e o resultado
function limpar() {
  const campos = ["fc", "resp", "tonus", "reflexo", "cor"];
  for (let campo of campos) {
    const radios = document.querySelectorAll(`input[name="${campo}"]`);
    radios.forEach(radio => radio.checked = false);
  }
  const resultadoDiv = document.getElementById("resultado");
  resultadoDiv.innerText = ""; // Limpa o texto do resultado
  resultadoDiv.classList.remove('text-red-600', 'text-dark-blue'); // Remove todas as cores de texto
}

// A função gerarPDFWrapper() é definida em site-index.js e acessível globalmente.
// Ela chamará a função gerarPDF do pdf111.js usando o ID 'pdfContent'.
</script>
